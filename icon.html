<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Prompton.io アイコンプラン詳細指定シート</title>

<!-- ===== STYLE ===== -->
<style>
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
:root{
  --primary:#6366f1;
  --primary-light:#818cf8;
  --danger:#ef4444;
  --bg:#f7f8fc;
  --card:#ffffff;
  --text:#333;
}
*{box-sizing:border-box;}
body{
  margin:0;
  font-family:"Roboto",sans-serif;
  background:var(--bg);
  color:var(--text);
  line-height:1.6;
  padding-bottom:4em;
}

/* Sticky header */
#topbar{
  position:sticky;top:0;z-index:1000;
  background:var(--card);box-shadow:0 2px 4px rgba(0,0,0,.08);
  padding:.6em 1em;display:flex;justify-content:center;font-weight:700;
}
#remaining{color:var(--primary);}

/* Intro */
.intro{padding:1.6em 1em 0;margin:0 auto;max-width:800px;}
.intro a{color:var(--primary);text-decoration:none;font-weight:700;}
.intro a:hover{text-decoration:underline;}

/* Sections & questions */
.section{
  margin:2em 0 1em;text-align:center;font-size:1.3em;font-weight:700;color:var(--primary);
}
.question{
  background:var(--card);border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,.05);
  padding:1em;margin:.7em 0;max-width:800px;margin-left:auto;margin-right:auto;
}
.question p{margin:.2em 0 .8em;font-weight:700;}
.question label{margin-right:1em;cursor:pointer;}
.question input[type=radio]{accent-color:var(--primary);margin-right:.25em;}
.textbox{
  display:none;width:100%;margin-top:.6em;padding:.55em .8em;
  border:1px solid #ccc;border-radius:4px;font-size:1em;
}

/* Buttons */
.btn{
  border:none;border-radius:6px;padding:.65em 1.4em;font-size:1em;font-weight:700;
  color:#fff;background:var(--primary);cursor:pointer;transition:background .2s;
}
.btn:hover{background:var(--primary-light);}
.actions{display:flex;justify-content:center;gap:1em;margin:2em 0;}

/* Summary */
#summary{
  white-space:pre-wrap;background:var(--card);border-radius:8px;
  padding:1.2em;margin:2em auto;box-shadow:0 2px 6px rgba(0,0,0,.1);max-width:800px;
}
.error{color:var(--danger);font-weight:700;}
.hidden{display:none;}
</style>
</head>
<body>

<!-- ===== TOP BAR ===== -->
<div id="topbar">残ポイント：<span id="remaining">20</span> / 20 pt</div>

<!-- ===== INTRO ===== -->
<div class="intro">
  <p>
    Prompton.ioの
    <a href="https://prompton.io/calendula/plans/kkE2aoK6d5RV5Oc68MGS8" target="_blank">アイコンプラン</a>
    の詳細指定シートです。<br>
    各指定にポイントが割り振られており、最大20pt分まで指定可能です。<br>
    最後に出力された結果をコピーして、要望欄に貼り付けてください。<br>
    文字数が不足する場合はスクリーンショットをアップロードしてください。
  </p>
</div>

<form id="quiz">

<h2 class="section">描画スタイル</h2>

<div class="question" data-section="描画スタイル">
  <p>@スタイル</p>
  <label><input type="radio" name="style" value="キンセンカデフォルト" data-pt="0" checked>キンセンカデフォルト</label>
  <label><input type="radio" name="style" value="リアルテクスチャ"     data-pt="2">リアルテクスチャ</label>
  <label><input type="radio" name="style" value="フラットデザイン"     data-pt="2">フラットデザイン</label>
</div>
<!-- =====================================================================
     SECTION: 髪
===================================================================== -->
<h2 class="section">髪</h2>

<div class="question" data-section="髪">
  <p>@長さ</p>
  <label><input type="radio" name="hair_len" value="指定する"   data-pt="1">指定する</label>
  <label><input type="radio" name="hair_len" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="ハゲ～ロングまで指定可能">
</div>

<div class="question" data-section="髪">
  <p>@髪型</p>
  <label><input type="radio" name="hair_style" value="指定する"   data-pt="2">指定する</label>
  <label><input type="radio" name="hair_style" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="複雑な髪型は失敗することがあります">
</div>

<div class="question" data-section="髪">
  <p>@癖</p>
  <label><input type="radio" name="hair_wave" value="ストレート" data-pt="1">ストレート</label>
  <label><input type="radio" name="hair_wave" value="ウェーブ"   data-pt="1">ウェーブ</label>
  <label><input type="radio" name="hair_wave" value="ボサボサ"   data-pt="1">ボサボサ</label>
  <label><input type="radio" name="hair_wave" value="カール"     data-pt="1">カール</label>
  <label><input type="radio" name="hair_wave" value="指定しない" data-pt="0" checked>指定しない</label>
</div>

<div class="question" data-section="髪">
  <p>@前髪の形状</p>
  <label><input type="radio" name="bangs" value="ぱっつん"       data-pt="1">ぱっつん</label>
  <label><input type="radio" name="bangs" value="流し"           data-pt="1">流し</label>
  <label><input type="radio" name="bangs" value="センター分け"   data-pt="1">センター分け</label>
  <label><input type="radio" name="bangs" value="眉上カット"     data-pt="1">眉上カット</label>
  <label><input type="radio" name="bangs" value="目の間に前髪"   data-pt="1">目の間に前髪</label>
  <label><input type="radio" name="bangs" value="指定しない"     data-pt="0" checked>指定しない</label>
</div>

<div class="question" data-section="髪">
  <p>@髪色</p>
  <label><input type="radio" name="hair_color" value="１色"         data-pt="1">１色</label>
  <label><input type="radio" name="hair_color" value="２色メッシュ" data-pt="3">２色メッシュ</label>
  <label><input type="radio" name="hair_color" value="２色ツートン" data-pt="3">２色ツートン</label>
  <label><input type="radio" name="hair_color" value="２色インナー" data-pt="3">２色インナー</label>
  <label><input type="radio" name="hair_color" value="指定しない"   data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="２色の場合はメインカラーを先に記入">
</div>

<!-- =====================================================================
     SECTION: 目
===================================================================== -->
<h2 class="section">目</h2>

<div class="question" data-section="目" data-hide-value="虹色の瞳">
  <p>@瞳の色</p>
  <label><input type="radio" name="eye_color" value="単色指定"   data-pt="1">単色指定</label>
  <label><input type="radio" name="eye_color" value="オッドアイ" data-pt="2">オッドアイ</label>
  <label><input type="radio" name="eye_color" value="虹色の瞳"   data-pt="2" data-hide="1">虹色の瞳</label>
  <label><input type="radio" name="eye_color" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="オッドアイは左右の指定ができません">
</div>

<div class="question" data-section="目">
  <p>@瞳孔の形状</p>
  <label><input type="radio" name="pupil" value="星"         data-pt="1">星</label>
  <label><input type="radio" name="pupil" value="ハート"     data-pt="1">ハート</label>
  <label><input type="radio" name="pupil" value="縦長"       data-pt="1">縦長</label>
  <label><input type="radio" name="pupil" value="指定しない" data-pt="0" checked>指定しない</label>
</div>

<div class="question" data-section="目">
  <p>@まつ毛の色</p>
  <label><input type="radio" name="lash_color" value="指定する"   data-pt="1">指定する</label>
  <label><input type="radio" name="lash_color" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="１色まで">
</div>

<div class="question" data-section="目">
  <p>@まつ毛の形状</p>
  <label><input type="radio" name="lash_shape" value="ツリ目"     data-pt="1">ツリ目</label>
  <label><input type="radio" name="lash_shape" value="タレ目"     data-pt="1">タレ目</label>
  <label><input type="radio" name="lash_shape" value="ジト目"     data-pt="1">ジト目</label>
  <label><input type="radio" name="lash_shape" value="三白眼"     data-pt="1">三白眼</label>
  <label><input type="radio" name="lash_shape" value="指定しない" data-pt="0" checked>指定しない</label>
</div>

<div class="question" data-section="目">
  <p>@白目</p>
  <label><input type="radio" name="sclera" value="黒にする"   data-pt="1">黒にする</label>
  <label><input type="radio" name="sclera" value="指定しない" data-pt="0" checked>指定しない</label>
</div>

<div class="question" data-section="目">
  <p>@目を閉じる</p>
  <label><input type="radio" name="eye_close" value="目を閉じる" data-pt="1">目を閉じる</label>
  <label><input type="radio" name="eye_close" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="瞳の設定が無効になります。笑顔閉じ/通常閉じを指定">
</div>

<!-- =====================================================================
     SECTION: 表情・口
===================================================================== -->
<h2 class="section">表情・口</h2>

<div class="question" data-section="表情・口">
  <p>@表情</p>
  <label><input type="radio" name="expression" value="指定する"   data-pt="1">指定する</label>
  <label><input type="radio" name="expression" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="表情は１つまでです">
</div>

<div class="question" data-section="表情・口">
  <p>@頬染め</p>
  <label><input type="radio" name="blush" value="頬染め有"    data-pt="1">頬染め有</label>
  <label><input type="radio" name="blush" value="顔全体を染める" data-pt="1">顔全体を染める</label>
  <label><input type="radio" name="blush" value="指定しない"     data-pt="0" checked>指定しない</label>
</div>

<div class="question" data-section="表情・口">
  <p>@口</p>
  <label><input type="radio" name="mouth" value="開ける"     data-pt="1">開ける</label>
  <label><input type="radio" name="mouth" value="閉じる"     data-pt="1">閉じる</label>
  <label><input type="radio" name="mouth" value="歯を見せる" data-pt="1">歯を見せる</label>
  <label><input type="radio" name="mouth" value="指定しない" data-pt="0" checked>指定しない</label>
</div>

<div class="question" data-section="表情・口">
  <p>@歯の形状</p>
  <label><input type="radio" name="tooth" value="ギザ歯"       data-pt="1">ギザ歯</label>
  <label><input type="radio" name="tooth" value="八重歯あり"   data-pt="1">八重歯あり</label>
  <label><input type="radio" name="tooth" value="指定しない"   data-pt="0" checked>指定しない</label>
</div>

<div class="question" data-section="表情・口">
  <p>@眉毛の形</p>
  <label><input type="radio" name="brow" value="指定する"   data-pt="1">指定する</label>
  <label><input type="radio" name="brow" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="形状、太さを指定できます">
</div>

<!-- =====================================================================
     SECTION: 服装
===================================================================== -->
<h2 class="section">服装</h2>

<div class="question" data-section="服装">
  <p>@服の種類</p>
  <label><input type="radio" name="cloth_type" value="指定する"   data-pt="1">指定する</label>
  <label><input type="radio" name="cloth_type" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="あまり映りません">
</div>

<div class="question" data-section="服装">
  <p>@服の色</p>
  <label><input type="radio" name="cloth_color" value="指定する"   data-pt="1">指定する</label>
  <label><input type="radio" name="cloth_color" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="１色まで">
</div>

<div class="question" data-section="服装">
  <p>@服の柄</p>
  <label><input type="radio" name="cloth_pattern" value="指定する"   data-pt="1">指定する</label>
  <label><input type="radio" name="cloth_pattern" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="パターン系の柄のみ">
</div>

<div class="question" data-section="服装">
  <p>@襟の形状</p>
  <label><input type="radio" name="collar" value="指定する"   data-pt="1">指定する</label>
  <label><input type="radio" name="collar" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="あり/なしのみの指定も可">
</div>

<div class="question" data-section="服装">
  <p>@頭の装飾品</p>
  <label><input type="radio" name="head_accessory" value="ヘアピン"  data-pt="1">ヘアピン</label>
  <label><input type="radio" name="head_accessory" value="帽子"      data-pt="1">帽子</label>
  <label><input type="radio" name="head_accessory" value="リボン"    data-pt="1">リボン</label>
  <label><input type="radio" name="head_accessory" value="その他"    data-pt="1">その他</label>
  <label><input type="radio" name="head_accessory" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="色や形状を指定してください">
</div>

<div class="question" data-section="服装">
  <p>@首の装飾品</p>
  <label><input type="radio" name="neck_accessory" value="チョーカー" data-pt="1">チョーカー</label>
  <label><input type="radio" name="neck_accessory" value="ネックレス" data-pt="1">ネックレス</label>
  <label><input type="radio" name="neck_accessory" value="指定しない" data-pt="0" checked>指定しない</label>
</div>

<div class="question" data-section="服装">
  <p>@耳の装飾品</p>
  <label><input type="radio" name="ear_accessory" value="シンプルピアス" data-pt="1">シンプルピアス</label>
  <label><input type="radio" name="ear_accessory" value="ゴテゴテピアス" data-pt="1">ゴテゴテピアス</label>
  <label><input type="radio" name="ear_accessory" value="イヤリング"     data-pt="1">イヤリング</label>
  <label><input type="radio" name="ear_accessory" value="指定しない"     data-pt="0" checked>指定しない</label>
</div>

<!-- =====================================================================
     SECTION: 体
===================================================================== -->
<h2 class="section">体</h2>

<div class="question" data-section="体">
  <p>@体格</p>
  <label><input type="radio" name="build" value="ガリガリ"   data-pt="1">ガリガリ</label>
  <label><input type="radio" name="build" value="スレンダー" data-pt="1">スレンダー</label>
  <label><input type="radio" name="build" value="筋肉質"     data-pt="1">筋肉質</label>
  <label><input type="radio" name="build" value="ぽっちゃり" data-pt="1">ぽっちゃり</label>
  <label><input type="radio" name="build" value="指定しない" data-pt="0" checked>指定しない</label>
</div>

<div class="question" data-section="体">
  <p>@年齢層</p>
  <label><input type="radio" name="age" value="指定する"   data-pt="1">指定する</label>
  <label><input type="radio" name="age" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="大体の年齢を指定してください">
</div>

<div class="question" data-section="体">
  <p>@胸のサイズ</p>
  <label><input type="radio" name="bust" value="ぺったんこ" data-pt="1">ぺったんこ</label>
  <label><input type="radio" name="bust" value="貧乳"       data-pt="1">貧乳</label>
  <label><input type="radio" name="bust" value="普通"       data-pt="1">普通</label>
  <label><input type="radio" name="bust" value="巨乳"       data-pt="1">巨乳</label>
  <label><input type="radio" name="bust" value="指定しない" data-pt="0" checked>指定しない</label>
</div>

<div class="question" data-section="体">
  <p>@肌の色</p>
  <label><input type="radio" name="skin" value="指定する"   data-pt="1">指定する</label>
  <label><input type="radio" name="skin" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="人外肌も可。鱗などの追加要素は不可。">
</div>

<!-- =====================================================================
     SECTION: その他
===================================================================== -->
<h2 class="section">その他</h2>

<div class="question" data-section="その他">
  <p>@カメラ</p>
  <label><input type="radio" name="camera" value="横から"     data-pt="1">横から</label>
  <label><input type="radio" name="camera" value="正面から"   data-pt="1">正面から</label>
  <label><input type="radio" name="camera" value="指定しない" data-pt="0" checked>指定しない</label>
</div>

<div class="question" data-section="その他">
  <p>@視線</p>
  <label><input type="radio" name="sight" value="カメラ目線"     data-pt="1">カメラ目線</label>
  <label><input type="radio" name="sight" value="カメラ以外を見る" data-pt="1">カメラ以外を見る</label>
  <label><input type="radio" name="sight" value="指定しない"       data-pt="0" checked>指定しない</label>
</div>

<div class="question" data-section="その他">
  <p>@背景色</p>
  <label><input type="radio" name="bg" value="指定する"   data-pt="1">指定する</label>
  <label><input type="radio" name="bg" value="指定しない" data-pt="0" checked>指定しない</label>
  <input class="textbox" maxlength="12" placeholder="フラット１色のみ。未指定はランダムです。">
</div>

<!-- ===== ACTION BUTTONS ===== -->
<div class="actions">
  <button type="button" id="showSummary" class="btn">結果を表示</button>
  <button type="button" id="copySummary" class="btn">結果をコピー</button>
</div>
</form>

<!-- ========== SUMMARY ========== -->
<div id="summary" class="hidden"></div>

<!-- ========== ACTION BUTTONS (下配置) ========== -->
<div class="actions">
  <button type="button" id="showSummary" class="btn">結果を表示</button>
  <button type="button" id="copySummary" class="btn">結果をコピー</button>
</div>

</form>

<!-- ===== SCRIPT ===== -->
<script>
const maxPoints = 20;
const quiz      = document.getElementById('quiz');
const remainEl  = document.getElementById('remaining');
const summaryEl = document.getElementById('summary');

/* --- 更新残ポイント --- */
function updateRemaining(){
  const used = [...quiz.querySelectorAll('input[type=radio]:checked')]
                 .reduce((s,r)=>s + Number(r.dataset.pt),0);
  const remain = maxPoints - used;
  remainEl.textContent = remain;
  remainEl.style.color = remain < 0 ? 'var(--danger)' : 'var(--primary)';
}

/* --- ラジオ変更処理 --- */
quiz.addEventListener('change', e=>{
  const qBox = e.target.closest('.question');
  if(!qBox) return;
  const textbox = qBox.querySelector('.textbox');
  const hideVal = qBox.dataset.hideValue;
  if(textbox){
    if(e.target.value === '指定しない' || e.target.dataset.hide || (hideVal && e.target.value === hideVal)){
      textbox.style.display='none';textbox.value='';
    }else{textbox.style.display='block';textbox.focus();}
  }
  updateRemaining();
});

/* --- 結果生成 --- */
function buildResult(){
  // 未選択チェック
  for(const q of quiz.querySelectorAll('.question')){
    if(!q.querySelector('input[type=radio]:checked')){
      return {ok:false,msg:`ERROR: 未選択の項目があります。（${q.dataset.section}）`};
    }
  }
  // ポイント計算
  const checked = [...quiz.querySelectorAll('input[type=radio]:checked')];
  const used = checked.reduce((s,r)=>s+Number(r.dataset.pt),0);
  if(used > maxPoints){return {ok:false,msg:'ERROR: ポイント上限を超過しています'};}

  // 結果行生成
  const lines=[];
  checked.forEach(r=>{
    const q  = r.closest('.question');
    const sec= q.dataset.section;
    const tb = q.querySelector('.textbox');
    const txt= tb?tb.value.trim():'';
    if(r.value==='指定しない' && !txt) return;          // skip
    const ans = txt || r.value;
    lines.push(`${sec}: ${ans}`);
  });
  lines.push('----');lines.push(`合計ポイント: ${used} / ${maxPoints}`);
  return {ok:true,msg:lines.join('\n')};
}

/* --- 結果ボタン --- */
document.getElementById('showSummary').addEventListener('click', ()=>{
  const res = buildResult();
  summaryEl.textContent=res.msg;
  summaryEl.classList.toggle('error',!res.ok);
  summaryEl.classList.remove('hidden');
  window.scrollTo({top:summaryEl.offsetTop-80,behavior:'smooth'});
});

/* --- コピー --- */
document.getElementById('copySummary').addEventListener('click', ()=>{
  const res = buildResult();
  if(!res.ok){
    summaryEl.textContent=res.msg;
    summaryEl.classList.add('error');
    summaryEl.classList.remove('hidden');
    return alert('エラーがあるためコピーできません');
  }
  navigator.clipboard.writeText(res.msg)
    .then(()=>alert('結果をコピーしました'))
    .catch(()=>alert('コピーに失敗しました'));
  summaryEl.textContent=res.msg;
  summaryEl.classList.remove('error','hidden');
  window.scrollTo({top:summaryEl.offsetTop-80,behavior:'smooth'});
});

/* --- 初期残ポイント --- */
updateRemaining();
</script>
</body>
</html>
